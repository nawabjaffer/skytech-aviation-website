import{c as e,j as t}from"./index-D-fL5Fxt.js";import{r as o}from"./vendor-WEAOkem-.js";import{X as s}from"./x-BnSxuvXK.js";const r=e("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),l={companyBrochure:{id:"61a32a0ad7",title:"Skytech Aviation",subtitle:"Company Brochure",coverImage:"https://cdnc.heyzine.com/flip-book/cover/61a32a0ad7.jpg",flipbookUrl:"https://heyzine.com/flip-book/61a32a0ad7.html",downloadUrl:"https://heyzine.com/flip-book/61a32a0ad7.html#download"}},n=({config:e,onClose:l,showDownload:n=!0})=>{const[a,c]=o.useState(!0),[i,u]=o.useState(!0),d=o.useRef(null),m=o.useRef(null),h=o.useRef(null),f=o.useRef(!1),b=o.useRef(!1);o.useEffect(()=>{const e=setTimeout(async()=>{try{d.current&&document.fullscreenEnabled&&(await d.current.requestFullscreen(),f.current=!0)}catch(e){}},100);return()=>clearTimeout(e)},[]),o.useEffect(()=>{const e=document.body.style.overflow,t=document.body.style.touchAction;return document.body.style.overflow="hidden",document.body.style.touchAction="none",()=>{document.body.style.overflow=e,document.body.style.touchAction=t}},[]),o.useEffect(()=>{m.current?.focus()},[]),o.useEffect(()=>{const e=e=>{"Escape"===e.key&&(e.preventDefault(),document.fullscreenElement?document.exitFullscreen().catch(()=>{p()}):p())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),o.useEffect(()=>{const e=()=>{f.current&&!document.fullscreenElement&&p()};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),o.useEffect(()=>(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{u(!1)},3e3),()=>{h.current&&clearTimeout(h.current)}),[]);const p=()=>{b.current||(b.current=!0,l())};return t.jsx("div",{className:"fixed inset-0 z-[9999] w-screen h-screen overflow-hidden safe-top safe-bottom",role:"dialog","aria-modal":"true","aria-labelledby":"flipbook-title",children:t.jsxs("div",{ref:d,className:"relative w-full h-full bg-black overflow-hidden",children:[t.jsx("button",{ref:m,onClick:async()=>{if(document.fullscreenElement)try{await document.exitFullscreen()}catch(e){}p()},className:"absolute top-4 sm:top-6 right-4 sm:right-6 z-50 p-2 sm:p-3 bg-white/10 hover:bg-white/20 active:bg-white/30 text-white rounded-full transition-all duration-200 touch-manipulation backdrop-blur-sm border border-white/10",title:"Close (ESC)","aria-label":"Close flipbook viewer",tabIndex:0,children:t.jsx(s,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),i&&!a&&t.jsx("div",{className:"absolute bottom-4 sm:bottom-6 right-4 sm:right-6 z-40 text-white/60 text-xs sm:text-sm backdrop-blur-sm bg-black/30 px-3 py-2 rounded-full animate-pulse pointer-events-none",children:"Press ESC to close"}),a&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black z-30",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4",children:[t.jsx("div",{className:"absolute inset-0 border-4 border-sky-500/20 rounded-full"}),t.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-sky-500 rounded-full animate-spin"})]}),t.jsx("p",{className:"text-white/60 text-sm",children:"Loading"})]})}),t.jsx("iframe",{src:e.flipbookUrl,title:e.title,className:"w-full h-full border-0 bg-black",onLoad:()=>c(!1),allow:"fullscreen",style:{touchAction:"pan-x pan-y pinch-zoom",filter:"none"}}),n&&!a&&t.jsxs("a",{href:e.flipbookUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute top-4 sm:top-6 left-4 sm:left-6 z-40 flex items-center gap-1.5 px-3 sm:px-4 py-1.5 sm:py-2 bg-white/10 hover:bg-white/20 active:bg-white/30 text-white text-xs sm:text-sm rounded-full transition-all duration-200 touch-manipulation backdrop-blur-sm border border-white/10",title:"Download full version",children:[t.jsx(r,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"View"})]})]})})};export{r as D,n as F,l as a};
